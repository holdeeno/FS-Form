<script>

  // Prevent forms from submitting.
  function preventFormSubmit() {
    var forms = document.querySelectorAll('form');
    for (var i = 0; i < forms.length; i++) {
      forms[i].addEventListener('submit', function(event) {
      event.preventDefault();
      });
    }
  }
  window.addEventListener("load", functionInit, true); 
  
  // INITIALIZE FUNCTIONS ONLOAD
  function functionInit(){  
    preventFormSubmit();
  };      


  /*
  # PROCESSING FORM -------------------------------------start--------------------------------------------
  */

  // HANDLE FORM SUBMISSIONS
  var submitCounter = 0; // submitCounter keeps track of the number of form submissions. Set equal to zero on intial form load.

  function handleFormSubmit(formObject) {

    submitCounter++;


    if (submitCounter == 1) {

      google.script.run.processInitialEntryForm(formObject);
      document.getElementById("myForm").reset();

    } else if (submitCounter == 2) {

      // This returns the matching field list array if the server-side function 'processSecondEntryForm()' returns succesfully
      function onSuccess(matchingFieldsList) { 
        console.log(matchingFieldsList);
        const matchingFieldsArray = matchingFieldsList;
      // function onSuccess(matchingFieldsList, formTwoData) {
        
      // }

        for (const element of matchingFieldsArray) {
          console.log(element);
          document.getElementById(element).parentNode.style.display = "none";
        }
        
      }
      google.script.run.withSuccessHandler(onSuccess).processSecondEntryForm(formObject);
      document.getElementById("myForm").reset();
      // I will need to                                                                          first create a key-value pair array that saves the names of the matching field names and their values.
      // Next, I will use a similar for loop to get the element by it's Id, and use the .value operator to insert the value into the field

      

    } else if (submitCounter == 3) {

     // google.script.run.processFinalForm(formObject);
      //document.getElementById("myForm").reset();
    }
  }

  /*
  # PROCESSING FORM ---------------------------------------end------------------------------------------
  */

</script>